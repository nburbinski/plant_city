(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{17:function(e,t,a){e.exports=a(42)},22:function(e,t,a){},41:function(e,t,a){},42:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(15),l=a.n(c),s=(a(22),a(2)),o=a(1),u=a.n(o),m=a(3),i=a(5),p=a.n(i),f="/api/plants",d=null,b={getAll:function(){var e={headers:{Authorization:d}};return p.a.get(f,e)},create:function(){var e=Object(m.a)(u.a.mark((function e(t){var a,n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={headers:{Authorization:d}},e.next=3,p.a.post(f,t,a);case 3:return n=e.sent,e.abrupt("return",n.data);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),update:function(e,t){var a={headers:{Authorization:d}};return p.a.put("".concat(f,"/").concat(e),t,a)},deletePlant:function(){var e=Object(m.a)(u.a.mark((function e(t){var a,n,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={headers:{Authorization:d}},n=p.a.delete("".concat(f,"/").concat(t),a),e.next=4,n.then((function(e){return e.data})).catch((function(e){return console.log(e)}));case 4:return r=e.sent,console.log(r),e.abrupt("return",r);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),setToken:function(e){d="bearer ".concat(e)}},v=function(){var e=Object(n.useState)(""),t=Object(s.a)(e,2),a=t[0],c=t[1],l=function(){var e=Object(m.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.t0=console,e.next=4,b.getAll();case 4:e.t1=e.sent,e.t0.log.call(e.t0,e.t1);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement("form",{onSubmit:l,className:"search-bar"},r.a.createElement("input",{className:"",type:"text",value:a,onChange:function(e){return c(e.target.value)},placeholder:"Search","aria-label":"Search"}),r.a.createElement("button",{className:"btn",type:"submit"},"Search"))},E=a(16),g=function(e){var t=e.plant,a=e.setConfMessage,c=new Date(t.lastWatered[t.lastWatered.length-1]),l=c.getFullYear()+"-"+"".concat(c.getMonth()+1>9?"":"0").concat(c.getMonth()+1)+"-"+c.getDate(),o=Object(n.useState)(l),i=Object(s.a)(o,2),p=i[0],f=i[1],d=function(){var e=Object(m.a)(u.a.mark((function e(){var a,n,r,c;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(a=p.split("-"))[2]=parseInt(a[2])+1,n=a.join("-"),(r=t.lastWatered).push(n),c=Object(E.a)({},t,{lastWatered:r}),console.log(c),b.update(t.id,c);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return r.a.createElement("div",{className:"card-body"},r.a.createElement("h4",{className:"card-title"},t.name," ",r.a.createElement("i",{className:"fas fa-leaf fa-sm card-image"})),r.a.createElement("ul",null,r.a.createElement("li",{className:"card-text"},r.a.createElement("p",{className:"card-text-title"},"Water"),r.a.createElement("p",null,t.water)),r.a.createElement("li",{className:"card-text"},r.a.createElement("p",{className:"card-text-title"},"Light"),r.a.createElement("p",null,t.light)),r.a.createElement("li",{className:"card-text"},r.a.createElement("p",{className:"card-text-title"},"Last Watered"),r.a.createElement("input",{type:"date",value:p,onChange:function(e){var t=e.target;return f(t.value)}}),r.a.createElement("button",{className:"btn btn-update",onClick:d},"Update"))),r.a.createElement("button",{className:"btn btn-danger card-btn",onClick:function(){if(window.confirm("Delete ".concat(t.name," ?")))try{b.deletePlant(t.id)}catch(e){a(e)}}},"Delete?"))},h=function(e){var t=e.plants,a=e.setPlantForm,n=e.setConfMessage;return t?r.a.createElement("div",{className:"card-list"},t.map((function(e){return r.a.createElement(g,{key:e.id,plant:e,setConfMessage:n})})),r.a.createElement("div",{onClick:function(){return a(1)},className:"card-body card-body-add "},r.a.createElement("i",{className:"fas fa-plus"}))):r.a.createElement("div",null," No plants added yet! or Server cannot be reached ")},N={login:function(){var e=Object(m.a)(u.a.mark((function e(t){var a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.a.post("/api/login",t);case 2:return a=e.sent,e.abrupt("return",a.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),create:function(){var e=Object(m.a)(u.a.mark((function e(t){var a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.a.post("/api/users",t);case 2:return a=e.sent,e.abrupt("return",a.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},w=function(e){var t=e.setCreateUser,a=e.setConfMessage,c=Object(n.useState)(""),l=Object(s.a)(c,2),o=l[0],i=l[1],p=Object(n.useState)(""),f=Object(s.a)(p,2),d=f[0],b=f[1],v=Object(n.useState)(""),E=Object(s.a)(v,2),g=E[0],h=E[1],w=function(){var e=Object(m.a)(u.a.mark((function e(n){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),e.prev=1,e.next=4,N.create({name:o,username:d,password:g});case 4:t(0),i(""),h(""),b(""),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(1),a(e.t0.message);case 13:return e.abrupt("return");case 14:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement(r.a.Fragment,null,r.a.createElement("form",{onSubmit:w},r.a.createElement("div",{className:"form-group"},r.a.createElement("div",{className:"form-label"}," Name"),r.a.createElement("input",{className:"form-control",type:"text",placeholder:"Enter name",value:o,onChange:function(e){return i(e.target.value)}})),r.a.createElement("div",{className:"form-group"},r.a.createElement("div",{className:"form-label"}," Username"),r.a.createElement("input",{className:"form-control",type:"text",placeholder:"Enter username",value:d,onChange:function(e){return b(e.target.value)}})),r.a.createElement("div",{className:"form-group"},r.a.createElement("div",{className:"form-label"}," Password"),r.a.createElement("input",{className:"form-control",type:"password",placeholder:"Enter password",onChange:function(e){return h(e.target.value)},value:g})),r.a.createElement("button",{type:"submit",className:"btn btn-primary"},"Create User"),r.a.createElement("button",{onClick:function(){return t(0)},className:"btn btn-createuser"},"Back")))},O=function(e){var t=e.setUser,a=e.setConfMessage,c=Object(n.useState)(""),l=Object(s.a)(c,2),o=l[0],i=l[1],p=Object(n.useState)(""),f=Object(s.a)(p,2),d=f[0],v=f[1],E=Object(n.useState)(0),g=Object(s.a)(E,2),h=g[0],O=g[1],j=function(){var e=Object(m.a)(u.a.mark((function e(n){var r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),e.prev=1,e.next=4,N.login({username:o,password:d});case 4:r=e.sent,window.localStorage.setItem("loggedPlantUser",JSON.stringify(r)),b.setToken(r.token),v(""),i(""),t(r),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(1),a(e.t0.message);case 15:return e.abrupt("return");case 16:case"end":return e.stop()}}),e,null,[[1,12]])})));return function(t){return e.apply(this,arguments)}}();return 1===h?r.a.createElement(w,{setConfMessage:a,setCreateUser:O}):r.a.createElement("div",null,r.a.createElement("form",{onSubmit:j,className:"login-form"},r.a.createElement("div",{className:"form-group"},r.a.createElement("p",{className:"form-label"}," Username "),r.a.createElement("input",{className:"form-control",type:"text",placeholder:"Enter username",value:o,onChange:function(e){return i(e.target.value)}})),r.a.createElement("div",{className:"form-group"},r.a.createElement("p",{className:"form-label"}," Password "),r.a.createElement("input",{className:"form-control",type:"password",placeholder:"Enter password",onChange:function(e){return v(e.target.value)},value:d})),r.a.createElement("button",{className:"btn btn-primary m-1",type:"submit"},"Login"),r.a.createElement("button",{onClick:function(){v(""),i(""),O(1)},className:"btn btn-createuser"},"Create User?")))};function j(e){var t=e.setPlantForm,a=Object(n.useRef)(null);return function(e){var t=function(t){(e.wrapperRef.current&&!e.wrapperRef.current.contains(t.target)||27===t.keyCode)&&e.setPlantForm(0)};Object(n.useEffect)((function(){return document.addEventListener("mousedown",t),document.addEventListener("keydown",t,!1),function(){document.removeEventListener("mousedown",t),document.removeEventListener("keydown",t,!1)}}))}({wrapperRef:a,setPlantForm:t}),r.a.createElement("div",{className:"plant-form-wrapper",ref:a},e.children)}var y=function(e){var t=e.plantForm,a=e.setPlantForm,c=e.setPlants,l=e.setConfMessage,o=Object(n.useState)(""),i=Object(s.a)(o,2),p=i[0],f=i[1],d=Object(n.useState)("Inside"),v=Object(s.a)(d,2),E=v[0],g=(v[1],Object(n.useState)("Indirect Light")),h=Object(s.a)(g,2),N=h[0],w=h[1],O=Object(n.useState)("Top 1/2 inch is dry"),y=Object(s.a)(O,2),C=y[0],k=y[1],S=Object(n.useState)("Top 1/2 inch is dry"),x=Object(s.a)(S,2),P=x[0],M=x[1],F=Object(n.useState)(new Date),L=Object(s.a)(F,2),U=L[0],A=L[1];if(0===t)return r.a.createElement(r.a.Fragment,null);var W=function(){var e=Object(m.a)(u.a.mark((function e(t){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),A(new Date(U)),n={name:p,location:E,light:N,water:P,lastWatered:[U]},b.create(n).then((function(e){return console.log(e)})).catch((function(e){return l(e.message)})),b.getAll().then((function(e){c(e.data)})),f(""),k(""),a(0),e.abrupt("return");case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement(j,{setPlantForm:a},r.a.createElement("form",{onSubmit:W,className:"plant-form"},r.a.createElement("h1",null,"Add a new plant"),r.a.createElement("div",{className:"form-group"},r.a.createElement("div",{className:"plant-form-query"},"Plant Name: "),r.a.createElement("input",{className:"plant-form-input",type:"text",placeholder:"Enter plant name here...",value:p,onChange:function(e){var t=e.target;return f(t.value)}})),r.a.createElement("div",{className:"form-group"},r.a.createElement("div",{className:"plant-form-query"},"Water requirements: "),r.a.createElement("select",{className:"",value:C,onChange:function(e){var t=e.target;return k(t.value)&&M(t.value)}},r.a.createElement("option",null,"Top 1/2 inch is dry"),r.a.createElement("option",null,"Top 1 inch is dry"),r.a.createElement("option",null,"Other"))),r.a.createElement("div",{className:"form-group"},r.a.createElement("div",{className:"plant-form-query"},"Light requirements:"),r.a.createElement("select",{className:"l",onChange:function(e){var t=e.target;return w(t.value)}},r.a.createElement("option",null,"Bright Light"),r.a.createElement("option",null,"Indirect Light"),r.a.createElement("option",null,"Partial Shade"))),r.a.createElement("div",{className:"form-group"},r.a.createElement("div",{className:"plant-form-query"},"Last Watered:"),r.a.createElement("input",{type:"date",className:"plant-form-input",onChange:function(e){var t=e.target;return A(t.value)}})," "),r.a.createElement("button",{className:"btn ",type:"submit"},"Add Plant!"),r.a.createElement("button",{className:"btn btn-cancel ",onClick:function(){return a(0)}},"Cancel")))},C=function(){return r.a.createElement("nav",{className:"main-nav"},r.a.createElement("button",{className:"btn"},"Home"),r.a.createElement("button",{className:"btn"},"About"),r.a.createElement("button",{onClick:function(){return window.open("https://github.com/nburbinski/plant_city","github repo")},className:"btn"},"GitHub"))},k=function(e){var t=e.confMessage,a=e.setConfMessage;return""===t?"":(setTimeout((function(){a("")}),4e3),r.a.createElement(r.a.Fragment,null,r.a.createElement("p",{className:"notif"},t)))};a(41);var S=function(){var e=Object(n.useState)(null),t=Object(s.a)(e,2),a=t[0],c=t[1],l=Object(n.useState)([]),o=Object(s.a)(l,2),u=o[0],m=o[1],i=Object(n.useState)(0),p=Object(s.a)(i,2),f=p[0],d=p[1],E=Object(n.useState)(""),g=Object(s.a)(E,2),N=g[0],w=g[1];return Object(n.useEffect)((function(){var e=window.localStorage.getItem("loggedPlantUser");if(e){var t=JSON.parse(e);c(t),b.setToken(t.token)}}),[]),Object(n.useEffect)((function(){b.getAll().then((function(e){m(e.data),console.log(e)}))}),[u]),null===a?r.a.createElement("div",{className:"login"},r.a.createElement(k,{confMessage:N,setConfMessage:w}),r.a.createElement("div",{className:"login-form"},r.a.createElement("div",{className:"login-header"},r.a.createElement("h1",null,"Plant City")),r.a.createElement("div",{className:"login-body"},r.a.createElement(O,{setUser:c,setConfMessage:w})))):r.a.createElement("div",{className:"plant-app"},r.a.createElement(y,{plantForm:f,setPlantForm:d,setPlants:m,setConfMessage:w}),r.a.createElement("header",{className:"plant-app-header"},r.a.createElement("h1",null,"Plant City"),r.a.createElement("div",{className:"logout"},"".concat(a.name),r.a.createElement("button",{className:"fa fa-sign-out",onClick:function(){m([]),window.localStorage.removeItem("loggedPlantUser"),c(null)}})),r.a.createElement(C,null)),r.a.createElement("section",{className:"app-body"},r.a.createElement(k,{confMessage:N,setConfMessage:w}),r.a.createElement(v,null),r.a.createElement("section",{className:"app-body-main"},r.a.createElement(h,{plants:u,setPlants:m,setPlantForm:d,setConfMessage:w}))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(r.a.createElement(S,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[17,1,2]]]);
//# sourceMappingURL=main.6bfc461f.chunk.js.map